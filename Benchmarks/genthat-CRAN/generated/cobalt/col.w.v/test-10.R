library(cobalt)

function_to_run <- function() {
    weights <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
    subset <- c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE)
    na.rm <- TRUE
    mat <- structure(c(30, 26, 25, 42, 25, 37, 32, 20, 38, 39, 41, 31, 34, 29, 22, 42, 25, 28, 40, 35, 27, 27, 36, 47, 40, 
        27, 36, 39, 21, 29, 22, 25, 27, 45, 26, 27, 33, 25, 49, 40, 22, 25, 25, 21, 33, 20, 19, 25, 29, 20, 29, 25, 41, 39, 
        33, 29, 21, 31, 36, 25, 35, 22, 31, 40, 47, 26, 42, 53, 30, 28, 46, 28, 27, 25, 38, 26, 54, 38, 23, 23, 23, 25, 25, 
        37, 40, 19, 48, 19, 16, 29, 30, 22, 22, 47, 25, 47, 24, 20, 28, 47, 50, 18, 21, 47, 21, 34, 19, 44, 21, 20, 51, 28, 
        24, 28, 20, 29, 23, 20, 42, 43, 27, 27, 25, 18, 31, 27, 18, 24, 23, 50, 19, 23, 51, 19, 20, 20, 21, 39, 36, 19, 42, 
        20, 23, 35, 18, 43, 37, 24, 51, 22, 19, 52, 21, 24, 35, 20, 17, 18, 28, 25, 40, 50, 48, 17, 30, 30, 22, 27, 25, 21, 
        17, 39, 18, 25, 20, 19, 19, 22, 18, 21, 24, 18, 17, 17, 18, 53, 18, 17, 26, 39, 18, 23, 18, 28, 32, 18, 40, 21, 29, 
        31, 46, 20, 36, 45, 16, 18, 40, 16, 16, 28, 20, 19, 16, 20, 35, 32, 32, 17, 16, 32, 19, 40, 50, 39, 18, 39, 17, 17, 
        19, 27, 18, 20, 20, 19, 24, 27, 19, 52, 18, 16, 18, 45, 21, 36, 21, 41, 18, 39, 19, 32, 16, 16, 21, 22, 23, 17, 21, 
        18, 24, 24, 16, 20, 42, 17, 19, 17, 21, 16, 23, 16, 17, 46, 32, 18, 23, 18, 19, 16, 26, 16, 17, 17, 23, 29, 17, 49, 
        20, 40, 19, 18, 16, 22, 31, 20, 17, 50, 49, 47, 34, 22, 27, 30, 52, 43, 27, 35, 45, 22, 22, 23, 55, 26, 34, 22, 31, 
        19, 24, 36, 20, 23, 35, 23, 29, 24, 18, 45, 21, 29, 21, 22, 24, 20, 19, 19, 19, 20, 19, 26, 26, 23, 20, 20, 36, 39, 
        17, 55, 28, 19, 37, 16, 17, 24, 19, 50, 19, 36, 18, 16, 21, 55, 37, 26, 54, 50, 16, 16, 18, 40, 16, 16, 26, 20, 20, 
        18, 46, 17, 16, 30, 33, 34, 21, 29, 19, 31, 19, 20, 55, 19, 18, 48, 16, 17, 38, 34, 53, 48, 16, 17, 27, 37, 17, 16, 
        48, 55, 21, 16, 23, 46, 17, 42, 18, 53, 17, 17, 43, 34, 16, 27, 51, 39, 55, 16, 27, 25, 18, 24, 21, 32, 16, 12, 12, 
        16, 11, 9, 9, 12, 12, 9, 10, 5, 14, 8, 12, 14, 0, 9, 9, 13, 9, 10, 6, 12, 8, 11, 7, 9, 6, 9, 12, 13, 10, 12, 8, 12, 
        12, 8, 12, 8, 3, 12, 5, 12, 12, 9, 12, 11, 12, 12, 12, 6, 13, 15, 10, 12, 8, 11, 12, 12, 7, 7, 9, 2, 15, 3, 8, 7, 
        12, 17, 10, 11, 12, 12, 10, 8, 12, 12, 8, 17, 8, 12, 12, 15, 11, 12, 10, 7, 12, 9, 10, 16, 11, 10, 10, 12, 10, 12, 
        12, 12, 11, 0, 12, 12, 11, 12, 11, 12, 13, 15, 12, 11, 13, 15, 8, 11, 12, 12, 11, 7, 12, 13, 4, 12, 12, 16, 12, 11, 
        7, 12, 12, 12, 10, 12, 11, 10, 11, 12, 10, 5, 9, 6, 7, 12, 12, 12, 8, 14, 10, 12, 11, 12, 0, 12, 12, 8, 13, 7, 10, 
        12, 14, 12, 3, 8, 7, 12, 7, 11, 12, 9, 14, 10, 7, 9, 12, 8, 13, 11, 12, 11, 10, 12, 11, 10, 10, 10, 10, 11, 10, 12, 
        5, 12, 13, 8, 10, 4, 11, 10, 14, 10, 6, 7, 9, 18, 12, 10, 12, 12, 9, 10, 5, 12, 8, 8, 11, 10, 6, 16, 9, 7, 15, 12, 
        12, 7, 11, 8, 10, 11, 5, 12, 15, 11, 14, 12, 13, 8, 12, 9, 8, 11, 10, 12, 12, 14, 8, 13, 7, 7, 9, 3, 13, 9, 7, 9, 
        12, 11, 8, 8, 10, 12, 12, 9, 8, 8, 8, 8, 9, 14, 9, 13, 9, 11, 7, 10, 11, 12, 10, 10, 7, 7, 10, 10, 10, 8, 12, 10, 
        8, 10, 16, 10, 11, 6, 8, 12, 11, 11, 12, 14, 9, 11, 8, 12, 10, 12, 12, 9, 13, 12, 11, 12, 11, 7, 14, 12, 11, 12, 
        12, 10, 12, 9, 8, 11, 12, 10, 9, 10, 8, 13, 13, 15, 16, 12, 14, 6, 9, 12, 13, 12, 5, 9, 12, 9, 10, 11, 12, 9, 3, 
        8, 12, 7, 9, 10, 12, 11, 5, 9, 1, 11, 7, 11, 6, 12, 12, 12, 12, 8, 9, 10, 11, 8, 9, 14, 9, 12, 11, 11, 8, 9, 10, 
        12, 12, 13, 11, 12, 4, 12, 12, 4, 11, 11, 13, 9, 10, 12, 8, 12, 14, 9, 8, 14, 8, 10, 8, 12, 7, 15, 10, 12, 11, 10, 
        16, 10, 12, 10, 6, 6, 12, 8, 12, 4, 2, 8, 9, 10, 14, 11, 1, 18, 5, 9), .Dim = c(429L, 2L), .Dimnames = list(c("186", 
        "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", 
        "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", 
        "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", 
        "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", 
        "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", 
        "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", 
        "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", 
        "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", 
        "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", 
        "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", 
        "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", 
        "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", 
        "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", 
        "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", 
        "425", "426", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", 
        "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", 
        "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", 
        "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", 
        "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", 
        "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", 
        "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", 
        "544", "545", "546", "547", "548", "549", "550", "551", "552", "553", "554", "555", "556", "557", "558", "559", "560", 
        "561", "562", "563", "564", "565", "566", "567", "568", "569", "570", "571", "572", "573", "574", "575", "576", "577", 
        "578", "579", "580", "581", "582", "583", "584", "585", "586", "587", "588", "589", "590", "591", "592", "593", "594", 
        "595", "596", "597", "598", "599", "600", "601", "602", "603", "604", "605", "606", "607", "608", "609", "610", "611", 
        "612", "613", "614"), c("age", "educ")))
    bin.vars <- c(FALSE, FALSE)
    cobalt:::col.w.v(mat = mat[subset, , drop = FALSE], w = weights[subset], bin.vars = bin.vars, na.rm = na.rm)
}




