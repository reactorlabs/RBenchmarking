library(car)

function_to_run <- function() {
    lm <- stats::lm
    OBrienKaiser <- carData::OBrienKaiser
    wts <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
    residuals <- stats::residuals
    model <- structure(list(coefficients = structure(c(3.90277777777778, 0.118055555555556, -0.229166666666667, -0.652777777777778, 
        -0.493055555555556, 0.604166666666667, 4.27777777777778, 0.138888888888889, -0.333333333333333, -0.777777777777778, 
        -0.388888888888889, 0.583333333333334, 5.43055555555556, -0.0763888888888889, -0.145833333333333, -0.180555555555556, 
        -0.548611111111111, 0.270833333333333, 4.61111111111111, 0.180555555555556, -0.708333333333333, -0.111111111111111, 
        -0.180555555555556, 0.708333333333333, 4.13888888888889, 0.194444444444444, -0.666666666666667, -0.638888888888889, 
        -0.194444444444445, 1.16666666666667, 5.02777777777778, 0.763888888888889, 0.291666666666667, -0.861111111111111, 
        -0.680555555555555, 0.958333333333333, 5.54166666666667, 0.895833333333334, 0.1875, -0.458333333333333, -0.604166666666667, 
        0.6875, 6.91666666666667, 0.833333333333334, -0.25, -0.416666666666667, -0.333333333333333, 0.25, 6.36111111111111, 
        0.722222222222222, 0.0833333333333334, -0.527777777777778, -0.555555555555556, 0.916666666666667, 4.83333333333333, 
        0.916666666666667, 8.69836384209689e-18, -1, -0.5, 1.25, 6.01388888888889, 0.923611111111112, -0.0625000000000002, 
        -0.597222222222222, -0.215277777777778, 0.6875, 6.15277777777778, 1.03472222222222, -0.0624999999999999, -0.902777777777778, 
        -0.159722222222222, 1.1875, 7.77777777777778, 1.09722222222222, -0.125, -0.777777777777778, -0.347222222222222, 0.875, 
        6.16666666666667, 0.958333333333334, 0.125, -0.833333333333334, -0.0416666666666669, 1.125, 5.34722222222222, 0.881944444444445, 
        0.229166666666667, -0.430555555555556, -0.173611111111111, 0.395833333333333), .Dim = c(6L, 15L), .Dimnames = list(c("(Intercept)", 
        "treatment1", "treatment2", "gender1", "treatment1:gender1", "treatment2:gender1"), c("pre.1", "pre.2", "pre.3", 
        "pre.4", "pre.5", "post.1", "post.2", "post.3", "post.4", "post.5", "fup.1", "fup.2", "fup.3", "fup.4", "fup.5"))), 
        residuals = structure(c(-2.33333333333333, 0.666666666666668, 1.66666666666667, 1, -1, 1, -1, -0.5, 0.5, -0.333333333333333, 
            -1.33333333333333, 1.66666666666667, 1.75, -1.25, -1.25, 0.75, -2, 4.9960036108132e-16, 2, -9.43689570931383e-16, 
            9.43689570931383e-16, 1.5, -1.5, 1.66533453693773e-16, 1.66533453693773e-16, -0.666666666666667, -1.66666666666667, 
            2.33333333333333, 1.5, -1.5, -1.5, 1.5, -0.666666666666668, 0.333333333333334, 0.333333333333333, 0.5, -0.5, 
            0.5, -0.5, 0.5, -0.5, -0.666666666666667, -1.66666666666667, 2.33333333333333, 1.25, -1.75, -1.75, 2.25, -2, 
            -1, 3, 0.5, -0.5, 2.5, -2.5, -1.5, 1.5, -0.666666666666667, -1.66666666666667, 2.33333333333333, 3.5, -3.5, -0.5, 
            0.5, -3, 1.22124532708767e-15, 3, 0.5, -0.499999999999999, 2, -2, -0.999999999999999, 1, 0.666666666666666, -0.333333333333334, 
            -0.333333333333334, 2, -2, -2.22044604925031e-16, -2.22044604925031e-16, 1.83186799063151e-15, -1, 0.999999999999998, 
            -2, 2, 1, -0.999999999999999, -1, 1, -0.666666666666667, -1.66666666666667, 2.33333333333333, -1.5, -0.5, 0.5, 
            1.5, -1, -1, 2, -2.5, 2.5, 1, -1, -0.5, 0.5, 1.66533453693773e-16, -3, 3, -0.25, -0.25, -0.25, 0.75, 8.88178419700125e-16, 
            -2, 2, -2.5, 2.5, 1, -1, 1, -1, -2, -1, 3, -1, -9.99200722162641e-17, -9.99200722162641e-17, 1, -1.33333333333333, 
            0.666666666666666, 0.666666666666666, -0.500000000000001, 0.500000000000001, -1, 1, 1, -1, 0.666666666666667, 
            -2.33333333333333, 1.66666666666667, 1, -2, 2, -1, -0.999999999999998, -1.2490009027033e-15, 1, -7.49400541621981e-16, 
            1.27675647831893e-15, 0.5, -0.5, 2, -2, 2, -2, 1.94289029309402e-16, 0.5, -3.5, 1.5, 1.5, -2.33333333333333, 
            -0.333333333333334, 2.66666666666667, -6.10622663543836e-16, 8.32667268468867e-16, 0.5, -0.5, 0.5, -0.5, 1, -2, 
            1, 0.25, -0.75, 0.25, 0.25, -1.66666666666667, 0.333333333333333, 1.33333333333333, 0.499999999999999, -0.499999999999998, 
            0.499999999999999, -0.5, 1, -1, 1, -1, 0, -0.25, -0.25, -0.25, 0.75, -3.66666666666666, 0.333333333333332, 3.33333333333333, 
            -0.5, 0.500000000000001, 6.66133814775094e-16, 2.22044604925031e-16, 2.22044604925031e-16, 2.22044604925031e-16, 
            -2.22044604925031e-16, -1, 1, -0.5, -0.5, -0.5, 1.5, -0.999999999999999, -1, 2, -0.500000000000001, 0.500000000000001, 
            -1.94289029309402e-16, 2.4980018054066e-16, 2.4980018054066e-16, 2.4980018054066e-16, -1.94289029309402e-16, 
            -1, 1, 2.5, -1.5, -1.5, 0.5, 0.333333333333336, -2.66666666666667, 2.33333333333333, 0.499999999999999, -0.5, 
            -1, 1, 1, -0.999999999999999, 1.33333333333333, -1.66666666666667, 0.333333333333333, 1.75, -3.25, 0.75, 0.75), 
            .Dim = 16:15, .Dimnames = list(c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", 
                "16"), c("pre.1", "pre.2", "pre.3", "pre.4", "pre.5", "post.1", "post.2", "post.3", "post.4", "post.5", "fup.1", 
                "fup.2", "fup.3", "fup.4", "fup.5"))), effects = structure(c(-15.25, 0.573069883093756, 0.854704323447285, 
            2.30338419023868, -2.4085395733034, -1.92057191774432, 0.0500629130992922, 1.30314895886695, 2.30314895886695, 
            0.961763153164784, -0.0382368468352159, 2.96176315316478, 1.21857660296769, -1.78142339703231, -1.78142339703231, 
            0.218576602967691, -16.75, 0.505649896847432, 1.1965860528262, 2.77994643649496, -1.84841409113982, -1.85434529989106, 
            -0.906999897923158, 2.22959876242374, 2.22959876242374, -0.163472733220484, -1.16347273322048, 2.83652726677952, 
            1.00615855317892, -1.99384144682108, -1.99384144682108, 1.00615855317892, -21.25, -0.235969951862134, 0.56980288229819, 
            0.693181449100042, -2.87264354423894, -0.860946032092279, -0.229855313546222, 0.9508115334042, -0.0491884665957997, 
            -0.0738257437280481, -1.07382574372805, 2.92617425627195, 1.05443029090079, -1.94556970909921, -1.94556970909921, 
            2.05443029090079, -18, 0.809039834955891, 2.16525095273312, -0.0144412801895835, -0.648145200789288, -2.25170500701057, 
            -1.809292529116, 1.25075951399445, 4.25075951399445, -0.0897483127869367, -1.08974831278694, 2.91025168721306, 
            2.12208487423089, -4.87791512576911, -1.87791512576911, -0.87791512576911, -16.25, 0.707909855586404, 2.05129037627348, 
            1.74739490293969, -0.504112933947223, -3.70869059978213, -0.889532189259614, 2.11321496487329, 4.11321496487329, 
            1.66393266338527, 0.663932663385272, 0.663932663385272, 1.08609365296334, -2.91390634703666, -0.913906347036662, 
            -0.913906347036662, -20.25, 4.48342908538056, -0.797724035217466, 2.93157987848559, -3.26473138175344, -3.0464244212496, 
            -1.65167510406293, 0.321620830126768, 2.32162083012677, -2.04228827248346, -3.04228827248346, 0.95771172751654, 
            -1.34062488729505, -0.340624887295054, 0.659375112704946, 1.65937511270495, -22.25, 5.29246892033645, -0.51282259406837, 
            1.50911377981155, -2.97666684806932, -2.18547838915732, -1.29177805844521, 1.88323873789653, 2.88323873789653, 
            -1.55607617044598, -4.55607617044598, 1.44392382955402, -0.0222191077983416, -0.0222191077983416, -0.0222191077983416, 
            0.977780892201658, -27.5, 4.51713907850372, 0.911684611677104, 1.57409954066468, -1.70438182429776, -0.794719414239026, 
            -1.56935607219939, 2.87860096091548, 0.878600960915482, -4.07121203068633, -3.07121203068633, 0.928787969313671, 
            -1.16513672347968, -0.165136723479684, -0.165136723479684, 0.834863276520316, -25.5, 4.24745913351843, -0.227921152919276, 
            1.60298210104385, -2.60058259575949, -2.9139711855431, 1.65938919359434, 1.81316980953319, -0.18683019046681, 
            0.603588027187803, -2.3964119728122, 1.6035880271878, 1.51929450899778, -1.48070549100222, 2.51929450899778, 
            -0.48070549100222, -19.5, 5.05649896847432, 0.0569802882298187, 3.21318484218249, -2.13647862482395, -3.97359707119513, 
            -0.132408785910474, 3.04370821816076, -0.956291781839238, 2.20420285802235, -1.79579714197765, 0.204202858022353, 
            0.288624858115013, -3.71137514188499, 1.28862485811501, 1.28862485811501, -24.25, 5.02278897535116, 0.227921152919277, 
            1.93513154540428, -0.848190015847709, -2.18547838915732, 0.624687776491031, 2.87803877926466, 1.87803877926466, 
            1.21484863897704, -1.78515136102296, 1.21484863897704, -0.326154311835238, -1.32615431183524, -0.326154311835238, 
            -0.326154311835238, -25, 5.52843887219859, 0.170940864689457, 2.76550515630538, -0.304068118888801, -3.77491721763537, 
            0.279918226645515, 2.35233742546275, 0.352337425462751, 1.7022555635595, -0.297744436440503, 0.702255563559498, 
            -0.585853687933095, -0.585853687933095, -0.585853687933095, 0.414146312066905, -31.25, 5.96666878279969, 0.455842305838551, 
            2.5561065935564, -1.48033163143232, -2.78151794983659, 1.64189464398316, 3.33339091490006, 3.33339091490006, 
            0.246558216899649, -0.753441783100351, 1.24655821689965, -0.627950965888564, -0.627950965888564, -0.627950965888564, 
            1.37204903411144, -25.25, 5.15762894784381, -0.455842305838551, 2.49834147279807, 0.312069911491137, -3.57623736407562, 
            0.592092572055284, 1.45850602284726, 1.45850602284726, -0.586175784248657, -1.58617578424866, 0.413824215751343, 
            2.03520418498149, -1.96479581501851, -1.96479581501851, 0.0352041849814893, -21.75, 4.95536898910483, -0.683763458757828, 
            1.47301057933759, -0.760170297222004, -1.25830573921179, 1.88350470388137, 1.31340300827152, -0.686596991728481, 
            0.315231304588242, -2.68476869541176, -0.684768695411758, 0.308382975342311, -4.69161702465769, -0.691617024657689, 
            -0.691617024657689), .Dim = 16:15, .Dimnames = list(c("(Intercept)", "treatment1", "treatment2", "gender1", "treatment1:gender1", 
            "treatment2:gender1", "", "", "", "", "", "", "", "", "", ""), c("pre.1", "pre.2", "pre.3", "pre.4", "pre.5", 
            "post.1", "post.2", "post.3", "post.4", "post.5", "fup.1", "fup.2", "fup.3", "fup.4", "fup.5"))), rank = 6L, 
        fitted.values = structure(c(3.33333333333333, 3.33333333333333, 3.33333333333333, 4, 4, 6, 6, 2.5, 2.5, 4.33333333333333, 
            4.33333333333333, 4.33333333333333, 3.25, 3.25, 3.25, 3.25, 4, 4, 4, 4, 4, 6.5, 6.5, 3, 3, 4.66666666666667, 
            4.66666666666667, 4.66666666666667, 3.5, 3.5, 3.5, 3.5, 4.66666666666667, 4.66666666666667, 4.66666666666667, 
            6.5, 6.5, 6.5, 6.5, 4.5, 4.5, 5.66666666666667, 5.66666666666667, 5.66666666666667, 4.75, 4.75, 4.75, 4.75, 4, 
            4, 4, 4.5, 4.5, 6.5, 6.5, 4.5, 4.5, 3.66666666666667, 3.66666666666667, 3.66666666666667, 4.5, 4.5, 4.5, 4.5, 
            4, 4, 4, 3.5, 3.5, 7, 7, 3, 3, 3.33333333333333, 3.33333333333333, 3.33333333333333, 4, 4, 4, 4, 3, 3, 3, 4, 
            4, 8, 8, 3, 3, 6.66666666666667, 6.66666666666667, 6.66666666666667, 5.5, 5.5, 5.5, 5.5, 3, 3, 3, 4.5, 4.5, 8, 
            8, 4.5, 4.5, 7, 7, 7, 6.25, 6.25, 6.25, 6.25, 5, 5, 5, 5.5, 5.5, 9, 9, 7, 7, 8, 8, 8, 7, 7, 7, 7, 4.33333333333333, 
            4.33333333333333, 4.33333333333333, 5.5, 5.5, 9, 9, 5, 5, 7.33333333333333, 7.33333333333333, 7.33333333333333, 
            7, 7, 7, 7, 3, 3, 3, 3, 3, 8.5, 8.5, 3, 3, 6, 6, 6, 5.5, 5.5, 5.5, 5.5, 4.33333333333333, 4.33333333333333, 4.33333333333333, 
            4, 4, 8.5, 8.5, 5.5, 5.5, 7, 7, 7, 6.75, 6.75, 6.75, 6.75, 4.66666666666667, 4.66666666666667, 4.66666666666667, 
            3.5, 3.5, 9.5, 9.5, 5, 5, 7, 7, 7, 7.25, 7.25, 7.25, 7.25, 5.66666666666666, 5.66666666666667, 5.66666666666667, 
            5.5, 5.5, 11, 11, 7, 7, 9, 9, 9, 8.5, 8.5, 8.5, 8.5, 5, 5, 5, 3.5, 3.5, 9, 9, 5, 5, 7, 7, 7, 7.5, 7.5, 7.5, 7.5, 
            3.66666666666666, 3.66666666666667, 3.66666666666667, 3.5, 3.5, 7, 7, 5, 5, 6.66666666666667, 6.66666666666667, 
            6.66666666666667, 6.25, 6.25, 6.25, 6.25), .Dim = 16:15, .Dimnames = list(c("1", "2", "3", "4", "5", "6", "7", 
            "8", "9", "10", "11", "12", "13", "14", "15", "16"), c("pre.1", "pre.2", "pre.3", "pre.4", "pre.5", "post.1", 
            "post.2", "post.3", "post.4", "post.5", "fup.1", "fup.2", "fup.3", "fup.4", "fup.5"))), assign = c(0L, 1L, 1L, 
            2L, 3L, 3L), qr = structure(list(qr = structure(c(-4, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 
            0.25, 0.25, 0.25, 0.25, 0.25, -0.25, 5.56214886532175, 0.296647939483827, 0.296647939483827, 0.296647939483827, 
            -0.242711950486767, -0.242711950486767, -0.242711950486767, -0.242711950486767, -0.242711950486767, -0.242711950486767, 
            -0.242711950486767, -0.242711950486767, -0.242711950486767, -0.242711950486767, -0.242711950486767, -0.75, 0.505649896847432, 
            -3.19089614086986, 8.69836384209689e-18, 8.69836384209689e-18, -0.398862017608733, -0.398862017608733, -0.398862017608733, 
            -0.398862017608733, 0.227921152919276, 0.227921152919276, 0.227921152919276, 0.227921152919276, 0.227921152919276, 
            0.227921152919276, 0.227921152919276, 0, 0.539359889970594, -0.227921152919276, -3.95691077194607, 0.380705983398872, 
            -0.292316000586341, -0.292316000586341, 0.213128806049106, 0.213128806049106, -0.250235005944148, -0.250235005944148, 
            -0.250235005944148, 0.2552098006913, 0.2552098006913, 0.2552098006913, 0.2552098006913, -0.75, -0.573069883093757, 
            -0.227921152919276, -0.317708164170853, 5.47322613999842, 0.229711444305211, 0.229711444305211, -0.315967760695612, 
            -0.315967760695612, 0.353852308561778, 0.353852308561778, 0.353852308561778, -0.191826896439045, -0.191826896439045, 
            -0.191826896439045, -0.191826896439045, -0.25, 0.16854996561581, -0.227921152919276, -0.72206400947921, 0.480107556140213, 
            -3.17887765695611, 0.397359707119513, -0.397359707119513, -0.397359707119513, -0.264906471413009, -0.264906471413009, 
            -0.264906471413009, 0.198679853559757, 0.198679853559757, 0.198679853559757, 0.198679853559757), .Dim = c(16L, 
            6L), .Dimnames = list(c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16"), 
            c("(Intercept)", "treatment1", "treatment2", "gender1", "treatment1:gender1", "treatment2:gender1")), assign = c(0L, 
            1L, 1L, 2L, 3L, 3L), contrasts = list(treatment = structure(c(-2, 1, 1, 0, -1, 1), .Dim = 3:2, .Dimnames = list(c("control", 
            "A", "B"), NULL)), gender = "contr.sum")), qraux = c(1.25, 1.29664793948383, 1, 1.38070598339887, 1.41469199594299, 
            1.39735970711951), pivot = 1:6, tol = 1e-07, rank = 6L), class = "qr"), df.residual = 10L, contrasts = list(treatment = structure(c(-2, 
            1, 1, 0, -1, 1), .Dim = 3:2, .Dimnames = list(c("control", "A", "B"), NULL)), gender = "contr.sum"), xlevels = list(treatment = c("control", 
            "A", "B"), gender = c("F", "M")), call = lm(formula = cbind(pre.1, pre.2, pre.3, pre.4, pre.5, post.1, post.2, 
            post.3, post.4, post.5, fup.1, fup.2, fup.3, fup.4, fup.5) ~ treatment * gender, data = OBrienKaiser), terms = cbind(pre.1, 
            pre.2, pre.3, pre.4, pre.5, post.1, post.2, post.3, post.4, post.5, fup.1, fup.2, fup.3, fup.4, fup.5) ~ treatment * 
            gender, model = structure(list(`cbind(pre.1, pre.2, pre.3, pre.4, pre.5, post.1, post.2, post.3, post.4, post.5, fup.1, fup.2, fup.3, fup.4, fup.5)` = structure(c(1, 
            4, 5, 5, 3, 7, 5, 2, 3, 4, 3, 6, 5, 2, 2, 4, 2, 4, 6, 4, 4, 8, 5, 3, 3, 4, 3, 7, 5, 2, 2, 5, 4, 5, 5, 7, 6, 7, 
            6, 5, 4, 5, 4, 8, 6, 3, 3, 7, 2, 3, 7, 5, 4, 9, 4, 3, 6, 3, 2, 6, 8, 1, 4, 5, 1, 4, 7, 4, 3, 9, 5, 2, 4, 4, 3, 
            3, 6, 2, 4, 4, 3, 2, 4, 2, 6, 9, 7, 2, 4, 6, 5, 9, 4, 5, 6, 7, 2, 2, 5, 2, 7, 9, 7, 4, 5, 7, 4, 10, 6, 6, 6, 
            7, 5, 3, 7, 3, 8, 10, 8, 8, 6, 6, 7, 11, 6, 7, 7, 8, 3, 5, 5, 5, 6, 8, 10, 6, 4, 8, 5, 9, 8, 5, 9, 6, 2, 3, 4, 
            3, 3, 9, 8, 5, 1, 8, 4, 6, 6, 2, 7, 7, 2, 4, 7, 4, 4, 9, 8, 6, 5, 8, 5, 8, 7, 6, 7, 7, 3, 5, 6, 4, 3, 10, 9, 
            6, 4, 8, 6, 7, 7, 7, 7, 8, 2, 6, 9, 5, 6, 11, 11, 7, 7, 9, 8, 10, 8, 8, 8, 10, 4, 4, 7, 3, 4, 9, 9, 5, 5, 7, 
            6, 8, 10, 6, 6, 8, 4, 1, 6, 4, 3, 6, 8, 6, 4, 8, 5, 7, 8, 3, 7, 7), .Dim = 16:15, .Dimnames = list(NULL, c("pre.1", 
            "pre.2", "pre.3", "pre.4", "pre.5", "post.1", "post.2", "post.3", "post.4", "post.5", "fup.1", "fup.2", "fup.3", 
            "fup.4", "fup.5"))), treatment = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), 
            contrasts = structure(c(-2, 1, 1, 0, -1, 1), .Dim = 3:2, .Dimnames = list(c("control", "A", "B"), NULL)), .Label = c("control", 
                "A", "B"), class = "factor"), gender = structure(c(2L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 
            1L, 1L), contrasts = "contr.sum", .Label = c("F", "M"), class = "factor")), terms = cbind(pre.1, pre.2, pre.3, 
            pre.4, pre.5, post.1, post.2, post.3, post.4, post.5, fup.1, fup.2, fup.3, fup.4, fup.5) ~ treatment * gender, 
            row.names = c(NA, 16L), class = "data.frame")), class = c("mlm", "lm"))
    car:::wcrossprod(x = residuals(model), w = wts)
}




